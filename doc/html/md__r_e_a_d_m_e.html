<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tesla BMS Big Loop: teslaBMSBL</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tesla BMS Big Loop
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">teslaBMSBL </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><img src="misc/20190319_221311.jpg" alt="Tesla BMS BL" class="inline"/>
<h2>dependencies</h2>
<ul>
<li>TeensyView libs<ul>
<li><a href="https://github.com/sparkfun/SparkFun_TeensyView_Arduino_Library/tree/master/examples">https://github.com/sparkfun/SparkFun_TeensyView_Arduino_Library/tree/master/examples</a></li>
</ul>
</li>
<li>Snooze for lower power consumption<ul>
<li><a href="https://github.com/duff2013/Snooze">https://github.com/duff2013/Snooze</a></li>
</ul>
</li>
</ul>
<h2>Error codes on teensyView</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">code  </th><th class="markdownTableHeadNone">definition   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">A  </td><td class="markdownTableBodyNone">Modules Fault Loop   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">B  </td><td class="markdownTableBodyNone">Battery Monitor Fault   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">C  </td><td class="markdownTableBodyNone">BMS Serial communication Fault   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">D  </td><td class="markdownTableBodyNone">BMS Cell Over Voltage Fault   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">E  </td><td class="markdownTableBodyNone">BMS Cell Under Voltage Fault   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">F  </td><td class="markdownTableBodyNone">BMS Over Temperature Fault   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">G  </td><td class="markdownTableBodyNone">BMS Under Temperature Fault   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">H  </td><td class="markdownTableBodyNone">BMS 12V Battery Over Voltage Fault   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">I  </td><td class="markdownTableBodyNone">BMS 12V Battery Under Voltage Fault   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">J  </td><td class="markdownTableBodyNone">BMS Water Sensor 1 Fault   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">K  </td><td class="markdownTableBodyNone">BMS Water Sensor 2 Fault   </td></tr>
</table>
<h2>Connection to USB serial console</h2>
<p>Serial Line: COMX (X typically = 7) Speed: 115200</p>
<h2>state machine:</h2>
<p><a href="https://online.visual-paradigm.com/w/pmcoivfe/diagrams.jsp#diagram:proj=0&amp;id=3">State machine</a> </p><h2>todo</h2>
<ul>
<li>[X] Change state machine to match actual charger controller behavior.</li>
<li>[X] sleep modes for the teensy<ul>
<li>[X] full speed when a console is connected and in all but STANDBY mode, 5s sleep in STANDBY when no console is connected.</li>
</ul>
</li>
</ul>
<h2>particularities</h2>
<p>Due to the 5s deepsleep mode in standby, it is hard to connect the serial console. To make it easier, either connect within 1 minute of a reset or place the bms in run mode and connect. Due to the deepsleep mode, it is impossible to simply reprogram the teensy following the first sleep. To facilitate reprogramming, the board will not sleep for 1 minute following a reset. The teensyview cannot be shut down as it is connected straight to the VDD pins. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
